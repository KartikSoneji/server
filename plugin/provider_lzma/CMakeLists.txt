FIND_PACKAGE(LibLZMA)

IF (LIBLZMA_FOUND)
  GET_PROPERTY(dirs DIRECTORY PROPERTY INCLUDE_DIRECTORIES)
  LIST(REMOVE_ITEM dirs ${CMAKE_SOURCE_DIR}/include/wrappers)
  SET_PROPERTY(DIRECTORY PROPERTY INCLUDE_DIRECTORIES "${dirs}")

  INCLUDE_DIRECTORIES(${LIBLZMA_INCLUDE_DIRS})

  MYSQL_ADD_PLUGIN(provider_lzma plugin.c MODULE_OUTPUT_NAME provider_lzma
    COMPONENT provider_lzma LINK_LIBRARIES ${LIBLZMA_LIBRARIES} CONFIG provider_lzma.cnf)
ENDIF()
